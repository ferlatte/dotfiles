#! /usr/bin/env bash

set -eu -o pipefail

for cask in $(brew cask list); do
    current=$(brew cask info "$cask" | perl -ne 'if (m|/usr/local/Caskroom/\w+/(\S+)|) { print "$1\n"; }')
    latest=$(brew cask info "$cask" | perl -ne 'if (m|'$cask': (\S+)|) { print("$1"); }')
    if [[ $current != "$latest" ]]; then
        echo "ðŸ¤¡  Upgrading $cask from $current to $latest:"
        brew cask reinstall "$cask"
    fi
done
